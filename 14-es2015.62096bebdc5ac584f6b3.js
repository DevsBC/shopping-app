(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{GXrT:function(t,o,i){"use strict";i.r(o),i.d(o,"Tab4PageModule",(function(){return k}));var e=i("ofXK"),n=i("3Pt+"),r=i("tyNb"),c=i("TEn/"),a=i("mrSG"),s=i("fXoL");let l=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=s.Eb({type:t,selectors:[["app-modal-confirm"]],decls:2,vars:0,template:function(t,o){1&t&&(s.Pb(0,"p"),s.lc(1," modal-confirm works!\n"),s.Ob())},styles:[""]}),t})();var b=i("c14U"),d=i("n90K");let u=(()=>{class t{constructor(t,o,i,e,n){this.cartService=t,this.modalController=o,this.toast=i,this.router=e,this.storage=n,this.items=[],this.totalPrice=this.cartService.getTotalPrice(),this.totalProducts=this.cartService.getCountCart(),this.message=this.totalProducts+" productos",this.items=this.cartService.getCart()}ngOnInit(){}shipping(t){this.shippingMethod=t.target.value}payment(t){this.paymentMethod=t.target.value}canProceed(){return""!==this.paymentMethod&&""!==this.shippingMethod}payAndProceed(){return Object(a.a)(this,void 0,void 0,(function*(){if(this.canProceed()){let t=[];const o=this.createOrder();localStorage.getItem("orders")?(t=JSON.parse(localStorage.getItem("orders")),t.push(o),this.storage.store("orders",t)):(t.push(o),this.storage.store("orders",t)),this.cartService.emptyCart(),this.presentToast("Genial! gracias por tu compra"),this.router.navigateByUrl("tabs/tab2"),this.dismissModal()}}))}presentModal(t){return Object(a.a)(this,void 0,void 0,(function*(){const o=yield this.modalController.create({component:l,componentProps:{order:t}});return yield o.present()}))}dismissModal(){return Object(a.a)(this,void 0,void 0,(function*(){yield this.modalController.dismiss()}))}createOrder(){return{id:Math.floor(1e5+9e5*Math.random()).toString(),status:"pending",orderDate:Date.now(),orderTotal:this.totalPrice,branch:"001",paymentMethod:this.paymentMethod,deliveryMethod:this.shippingMethod,requestedBy:"IDUSER",username:"Juan Carlos Aranda",email:"juancarlos@gmail.com",clientHasArrived:!1,products:this.items}}presentToast(t){return Object(a.a)(this,void 0,void 0,(function*(){(yield this.toast.create({message:t,duration:2e3})).present()}))}}return t.\u0275fac=function(o){return new(o||t)(s.Kb(b.a),s.Kb(c.W),s.Kb(c.cb),s.Kb(r.g),s.Kb(d.a))},t.\u0275cmp=s.Eb({type:t,selectors:[["app-modal-checkout"]],decls:51,vars:2,consts:[["translucent",""],["slot","end"],[3,"click"],["color","primary"],["name","car","slot","start"],["value","delivery",3,"click"],["name","walk","slot","start"],["value","storePickup",3,"click"],["name","card-outline","slot","start"],["value","creditcard",3,"click"],["name","cash-outline","slot","start"],["value","cash",3,"click"],[1,"ion-padding"],[1,"ion-no-padding","ion-text-center",2,"margin","0"],["color","success",2,"font-size","20pt"],["color","dark"],["lines","none",1,"ion-no-padding","ion-text-center"],["expand","full","color","success",3,"click"]],template:function(t,o){1&t&&(s.Pb(0,"ion-header",0),s.Pb(1,"ion-toolbar"),s.Pb(2,"ion-title"),s.lc(3,"Resumen"),s.Ob(),s.Pb(4,"ion-buttons",1),s.Pb(5,"ion-button",2),s.Xb("click",(function(){return o.dismissModal()})),s.lc(6,"Cerrar"),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Pb(7,"ion-content"),s.Pb(8,"ion-list"),s.Pb(9,"ion-radio-group"),s.Pb(10,"ion-list-header"),s.Pb(11,"ion-text",3),s.Pb(12,"h2"),s.lc(13,"Metodo de envio"),s.Ob(),s.Ob(),s.Ob(),s.Pb(14,"ion-item"),s.Pb(15,"ion-label"),s.lc(16,"A domicilio"),s.Ob(),s.Lb(17,"ion-icon",4),s.Pb(18,"ion-radio",5),s.Xb("click",(function(t){return o.shipping(t)})),s.Ob(),s.Ob(),s.Pb(19,"ion-item"),s.Pb(20,"ion-label"),s.lc(21,"Recoger"),s.Ob(),s.Lb(22,"ion-icon",6),s.Pb(23,"ion-radio",7),s.Xb("click",(function(t){return o.shipping(t)})),s.Ob(),s.Ob(),s.Ob(),s.Pb(24,"ion-radio-group"),s.Pb(25,"ion-list-header"),s.Pb(26,"ion-text",3),s.Pb(27,"h2"),s.lc(28,"Metodo de pago"),s.Ob(),s.Ob(),s.Ob(),s.Pb(29,"ion-item"),s.Pb(30,"ion-label"),s.lc(31,"Tarjeta"),s.Ob(),s.Lb(32,"ion-icon",8),s.Pb(33,"ion-radio",9),s.Xb("click",(function(t){return o.payment(t)})),s.Ob(),s.Ob(),s.Pb(34,"ion-item"),s.Pb(35,"ion-label"),s.lc(36,"En efectivo"),s.Ob(),s.Lb(37,"ion-icon",10),s.Pb(38,"ion-radio",11),s.Xb("click",(function(t){return o.payment(t)})),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Pb(39,"ion-card",12),s.Pb(40,"ion-card-header",13),s.Pb(41,"ion-text",14),s.Pb(42,"ion-label",15),s.lc(43,"TOTAL:"),s.Ob(),s.lc(44),s.Ob(),s.Ob(),s.Pb(45,"ion-card-content"),s.Pb(46,"ion-item",16),s.Pb(47,"ion-label"),s.lc(48),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Pb(49,"ion-button",17),s.Xb("click",(function(){return o.payAndProceed()})),s.lc(50," CONFIRMAR "),s.Ob(),s.Ob()),2&t&&(s.zb(44),s.nc(""," $"+o.totalPrice," "),s.zb(4),s.nc(" ",o.message," "))},directives:[c.t,c.T,c.S,c.f,c.e,c.n,c.D,c.I,c.ab,c.E,c.R,c.x,c.C,c.u,c.H,c.Z,c.g,c.i,c.h],styles:[""]}),t})();function h(t,o){1&t&&(s.Pb(0,"ion-text"),s.Pb(1,"h1"),s.lc(2,"Agrega productos a tu carrito"),s.Ob(),s.Ob())}function m(t,o){if(1&t){const t=s.Qb();s.Pb(0,"ion-item-divider",null,5),s.Pb(2,"ion-item-sliding"),s.Pb(3,"ion-item-options",6),s.Pb(4,"ion-item-option",7),s.Lb(5,"ion-icon",8),s.Ob(),s.Ob(),s.Pb(6,"ion-item"),s.Pb(7,"ion-grid"),s.Pb(8,"ion-row"),s.Pb(9,"ion-col",9),s.Lb(10,"ion-img",10),s.Ob(),s.Pb(11,"ion-col",11),s.Pb(12,"ion-text"),s.lc(13),s.Ob(),s.Ob(),s.Ob(),s.Pb(14,"ion-row"),s.Pb(15,"ion-col",12),s.Pb(16,"ion-chip",13),s.Pb(17,"ion-icon",14),s.Xb("click",(function(){s.hc(t);const i=o.$implicit;return s.Zb().removeItem(i)})),s.Ob(),s.Pb(18,"ion-label"),s.lc(19),s.Ob(),s.Pb(20,"ion-icon",15),s.Xb("click",(function(){s.hc(t);const i=o.$implicit;return s.Zb().addItem(i)})),s.Ob(),s.Ob(),s.Ob(),s.Pb(21,"ion-col",16),s.Pb(22,"ion-text",17),s.lc(23),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Pb(24,"ion-item-options",18),s.Pb(25,"ion-item-option",19),s.Pb(26,"ion-icon",20),s.Xb("click",(function(){s.hc(t);const i=o.$implicit,e=s.gc(1);return s.Zb().deleteFromCart(i,e)})),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob()}if(2&t){const t=o.$implicit;s.zb(10),s.ec("src",t.img),s.zb(3),s.mc(t.name),s.zb(6),s.mc(t.amount),s.zb(4),s.nc(" ","$"+t.totalPrice," ")}}function p(t,o){if(1&t&&(s.Pb(0,"ion-card",21),s.Pb(1,"ion-card-header",22),s.Pb(2,"ion-text",23),s.lc(3),s.Ob(),s.Ob(),s.Pb(4,"ion-card-content"),s.Pb(5,"ion-item",24),s.Pb(6,"ion-label"),s.lc(7),s.Ob(),s.Ob(),s.Ob(),s.Ob()),2&t){const t=s.Zb();s.zb(3),s.nc(" ","$"+t.getTotalPriceCart()," "),s.zb(4),s.nc(" ",t.totalProducts," productos en tu carrito ")}}function P(t,o){if(1&t){const t=s.Qb();s.Pb(0,"ion-button",25),s.Xb("click",(function(){return s.hc(t),s.Zb().checkout()})),s.lc(1," Hacer Pedido "),s.Ob()}}let g=(()=>{class t{constructor(t,o){this.cart=t,this.modalController=o,this.cartItems=[],this.totalPrice=0,this.totalProducts=0}ngOnInit(){}ionViewWillEnter(){this.cartItems=this.cart.getCart(),this.totalPrice=this.cart.getTotalPrice(),this.totalProducts=this.cart.getCountCart(),console.log(this.cartItems)}addItem(t){t.totalPrice+=t.unitPrice,t.amount++,this.totalPrice+=t.unitPrice,this.totalProducts++,this.cart.saveCart(this.cartItems)}removeItem(t){t.amount>1&&(t.amount--,t.totalPrice-=t.unitPrice,this.totalProducts--,this.totalPrice-=t.unitPrice),this.cart.saveCart(this.cartItems),console.log(t)}deleteFromCart(t,o){this.totalPrice-=t.totalPrice,this.cartItems=this.cartItems.filter(o=>o.id!==t.id),this.cart.saveCart(this.cartItems),this.totalProducts=this.cart.getCountCart(),o.el.remove()}getTotalPriceCart(){return this.cart.getTotalPrice()}checkout(){this.cartItems.length>0&&(this.cart.saveCart(this.cartItems),this.goToCheckOut())}goToCheckOut(){return Object(a.a)(this,void 0,void 0,(function*(){const t=yield this.modalController.create({component:u,swipeToClose:!0});return yield t.present()}))}}return t.\u0275fac=function(o){return new(o||t)(s.Kb(b.a),s.Kb(c.W))},t.\u0275cmp=s.Eb({type:t,selectors:[["app-tab4"]],decls:6,vars:4,consts:[[1,"animate__animated","animate__fadeIn"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","ion-padding",4,"ngIf"],["expand","block","shape","round","color","primary",3,"click",4,"ngIf"],["ionItem",""],["side","start"],["slot","icon-only","color","light"],["name","heart","color","danger",2,"zoom","2.0"],["size","3"],[3,"src"],["size","auto",1,"ion-text-center"],["size","8"],["color","medium","outline","true"],["name","remove-outline","color","danger",3,"click"],["name","add-outline","color","success",3,"click"],["size","4"],["color","danger",2,"font-size","15pt","float","right","padding-top","3px"],["side","end"],["slot","icon-only","color","danger"],["name","trash-outline",2,"zoom","2.0",3,"click"],[1,"ion-padding"],[1,"ion-no-padding",2,"margin","0"],["color","success",2,"float","right","font-size","20pt"],["lines","none",1,"ion-no-padding","ion-text-center"],["expand","block","shape","round","color","primary",3,"click"]],template:function(t,o){1&t&&(s.Pb(0,"ion-content",0),s.kc(1,h,3,0,"ion-text",1),s.Pb(2,"ion-list"),s.kc(3,m,27,4,"ion-item-divider",2),s.Ob(),s.kc(4,p,8,2,"ion-card",3),s.kc(5,P,2,0,"ion-button",4),s.Ob()),2&t&&(s.zb(1),s.ec("ngIf",0===o.cartItems.length),s.zb(2),s.ec("ngForOf",o.cartItems),s.zb(1),s.ec("ngIf",o.cartItems.length>0),s.zb(1),s.ec("ngIf",o.cartItems.length>0))},directives:[c.n,e.j,c.D,e.i,c.R,c.y,c.B,c.A,c.z,c.u,c.x,c.s,c.K,c.m,c.v,c.l,c.C,c.g,c.i,c.h,c.e],styles:[""]}),t})();const O=[{path:"",component:g}];let f=(()=>{class t{}return t.\u0275mod=s.Ib({type:t}),t.\u0275inj=s.Hb({factory:function(o){return new(o||t)},imports:[[r.i.forChild(O)],r.i]}),t})();var v=i("j1ZV");let k=(()=>{class t{}return t.\u0275mod=s.Ib({type:t}),t.\u0275inj=s.Hb({factory:function(o){return new(o||t)},imports:[[e.b,n.a,c.U,r.i.forChild([{path:"",component:g}]),f,v.a]]}),t})()}}]);