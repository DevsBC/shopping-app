function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{GXrT:function(t,e,n){"use strict";n.r(e),n.d(e,"Tab4PageModule",(function(){return x}));var i,o,r=n("ofXK"),c=n("3Pt+"),a=n("tyNb"),s=n("TEn/"),l=n("mrSG"),u=n("fXoL"),b=((i=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||i)},i.\u0275cmp=u.Eb({type:i,selectors:[["app-modal-confirm"]],decls:2,vars:0,template:function(t,e){1&t&&(u.Pb(0,"p"),u.lc(1," modal-confirm works!\n"),u.Ob())},styles:[""]}),i),d=n("c14U"),h=n("n90K"),m=((o=function(){function t(e,n,i,o,r){_classCallCheck(this,t),this.cartService=e,this.modalController=n,this.toast=i,this.router=o,this.storage=r,this.items=[],this.totalPrice=this.cartService.getTotalPrice(),this.totalProducts=this.cartService.getCountCart(),this.message=this.totalProducts+" productos",this.items=this.cartService.getCart()}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"shipping",value:function(t){this.shippingMethod=t.target.value}},{key:"payment",value:function(t){this.paymentMethod=t.target.value}},{key:"canProceed",value:function(){return""!==this.paymentMethod&&""!==this.shippingMethod}},{key:"payAndProceed",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.canProceed()&&(e=[],n=this.createOrder(),localStorage.getItem("orders")?((e=JSON.parse(localStorage.getItem("orders"))).push(n),this.storage.store("orders",e)):(e.push(n),this.storage.store("orders",e)),this.cartService.emptyCart(),this.presentToast("Genial! gracias por tu compra"),this.router.navigateByUrl("tabs/tab2"),this.dismissModal());case 1:case"end":return t.stop()}}),t,this)})))}},{key:"presentModal",value:function(t){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalController.create({component:b,componentProps:{order:t}});case 2:return n=e.sent,e.next=5,n.present();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"dismissModal",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalController.dismiss();case 2:case"end":return t.stop()}}),t,this)})))}},{key:"createOrder",value:function(){return{id:Math.floor(1e5+9e5*Math.random()).toString(),status:"pending",orderDate:Date.now(),orderTotal:this.totalPrice,branch:"001",paymentMethod:this.paymentMethod,deliveryMethod:this.shippingMethod,requestedBy:"IDUSER",username:"Juan Carlos Aranda",email:"juancarlos@gmail.com",clientHasArrived:!1,products:this.items}}},{key:"presentToast",value:function(t){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.toast.create({message:t,duration:2e3});case 2:e.sent.present();case 3:case"end":return e.stop()}}),e,this)})))}}]),t}()).\u0275fac=function(t){return new(t||o)(u.Kb(d.a),u.Kb(s.W),u.Kb(s.cb),u.Kb(a.g),u.Kb(h.a))},o.\u0275cmp=u.Eb({type:o,selectors:[["app-modal-checkout"]],decls:51,vars:2,consts:[["translucent",""],["slot","end"],[3,"click"],["color","primary"],["name","car","slot","start"],["value","delivery",3,"click"],["name","walk","slot","start"],["value","storePickup",3,"click"],["name","card-outline","slot","start"],["value","creditcard",3,"click"],["name","cash-outline","slot","start"],["value","cash",3,"click"],[1,"ion-padding"],[1,"ion-no-padding","ion-text-center",2,"margin","0"],["color","success",2,"font-size","20pt"],["color","dark"],["lines","none",1,"ion-no-padding","ion-text-center"],["expand","full","color","success",3,"click"]],template:function(t,e){1&t&&(u.Pb(0,"ion-header",0),u.Pb(1,"ion-toolbar"),u.Pb(2,"ion-title"),u.lc(3,"Resumen"),u.Ob(),u.Pb(4,"ion-buttons",1),u.Pb(5,"ion-button",2),u.Xb("click",(function(){return e.dismissModal()})),u.lc(6,"Cerrar"),u.Ob(),u.Ob(),u.Ob(),u.Ob(),u.Pb(7,"ion-content"),u.Pb(8,"ion-list"),u.Pb(9,"ion-radio-group"),u.Pb(10,"ion-list-header"),u.Pb(11,"ion-text",3),u.Pb(12,"h2"),u.lc(13,"Metodo de envio"),u.Ob(),u.Ob(),u.Ob(),u.Pb(14,"ion-item"),u.Pb(15,"ion-label"),u.lc(16,"A domicilio"),u.Ob(),u.Lb(17,"ion-icon",4),u.Pb(18,"ion-radio",5),u.Xb("click",(function(t){return e.shipping(t)})),u.Ob(),u.Ob(),u.Pb(19,"ion-item"),u.Pb(20,"ion-label"),u.lc(21,"Recoger"),u.Ob(),u.Lb(22,"ion-icon",6),u.Pb(23,"ion-radio",7),u.Xb("click",(function(t){return e.shipping(t)})),u.Ob(),u.Ob(),u.Ob(),u.Pb(24,"ion-radio-group"),u.Pb(25,"ion-list-header"),u.Pb(26,"ion-text",3),u.Pb(27,"h2"),u.lc(28,"Metodo de pago"),u.Ob(),u.Ob(),u.Ob(),u.Pb(29,"ion-item"),u.Pb(30,"ion-label"),u.lc(31,"Tarjeta"),u.Ob(),u.Lb(32,"ion-icon",8),u.Pb(33,"ion-radio",9),u.Xb("click",(function(t){return e.payment(t)})),u.Ob(),u.Ob(),u.Pb(34,"ion-item"),u.Pb(35,"ion-label"),u.lc(36,"En efectivo"),u.Ob(),u.Lb(37,"ion-icon",10),u.Pb(38,"ion-radio",11),u.Xb("click",(function(t){return e.payment(t)})),u.Ob(),u.Ob(),u.Ob(),u.Ob(),u.Pb(39,"ion-card",12),u.Pb(40,"ion-card-header",13),u.Pb(41,"ion-text",14),u.Pb(42,"ion-label",15),u.lc(43,"TOTAL:"),u.Ob(),u.lc(44),u.Ob(),u.Ob(),u.Pb(45,"ion-card-content"),u.Pb(46,"ion-item",16),u.Pb(47,"ion-label"),u.lc(48),u.Ob(),u.Ob(),u.Ob(),u.Ob(),u.Pb(49,"ion-button",17),u.Xb("click",(function(){return e.payAndProceed()})),u.lc(50," CONFIRMAR "),u.Ob(),u.Ob()),2&t&&(u.zb(44),u.nc(""," $"+e.totalPrice," "),u.zb(4),u.nc(" ",e.message," "))},directives:[s.t,s.T,s.S,s.f,s.e,s.n,s.D,s.I,s.ab,s.E,s.R,s.x,s.C,s.u,s.H,s.Z,s.g,s.i,s.h],styles:[""]}),o);function p(t,e){1&t&&(u.Pb(0,"ion-text"),u.Pb(1,"h1"),u.lc(2,"Agrega productos a tu carrito"),u.Ob(),u.Ob())}function f(t,e){if(1&t){var n=u.Qb();u.Pb(0,"ion-item-divider",null,5),u.Pb(2,"ion-item-sliding"),u.Pb(3,"ion-item-options",6),u.Pb(4,"ion-item-option",7),u.Lb(5,"ion-icon",8),u.Ob(),u.Ob(),u.Pb(6,"ion-item"),u.Pb(7,"ion-grid"),u.Pb(8,"ion-row"),u.Pb(9,"ion-col",9),u.Lb(10,"ion-img",10),u.Ob(),u.Pb(11,"ion-col",11),u.Pb(12,"ion-text"),u.lc(13),u.Ob(),u.Ob(),u.Ob(),u.Pb(14,"ion-row"),u.Pb(15,"ion-col",12),u.Pb(16,"ion-chip",13),u.Pb(17,"ion-icon",14),u.Xb("click",(function(){u.hc(n);var t=e.$implicit;return u.Zb().removeItem(t)})),u.Ob(),u.Pb(18,"ion-label"),u.lc(19),u.Ob(),u.Pb(20,"ion-icon",15),u.Xb("click",(function(){u.hc(n);var t=e.$implicit;return u.Zb().addItem(t)})),u.Ob(),u.Ob(),u.Ob(),u.Pb(21,"ion-col",16),u.Pb(22,"ion-text",17),u.lc(23),u.Ob(),u.Ob(),u.Ob(),u.Ob(),u.Ob(),u.Pb(24,"ion-item-options",18),u.Pb(25,"ion-item-option",19),u.Pb(26,"ion-icon",20),u.Xb("click",(function(){u.hc(n);var t=e.$implicit,i=u.gc(1);return u.Zb().deleteFromCart(t,i)})),u.Ob(),u.Ob(),u.Ob(),u.Ob(),u.Ob()}if(2&t){var i=e.$implicit;u.zb(10),u.ec("src",i.img),u.zb(3),u.mc(i.name),u.zb(6),u.mc(i.amount),u.zb(4),u.nc(" ","$"+i.totalPrice," ")}}function P(t,e){if(1&t&&(u.Pb(0,"ion-card",21),u.Pb(1,"ion-card-header",22),u.Pb(2,"ion-text",23),u.lc(3),u.Ob(),u.Ob(),u.Pb(4,"ion-card-content"),u.Pb(5,"ion-item",24),u.Pb(6,"ion-label"),u.lc(7),u.Ob(),u.Ob(),u.Ob(),u.Ob()),2&t){var n=u.Zb();u.zb(3),u.nc(" ","$"+n.getTotalPriceCart()," "),u.zb(4),u.nc(" ",n.totalProducts," productos en tu carrito ")}}function g(t,e){if(1&t){var n=u.Qb();u.Pb(0,"ion-button",25),u.Xb("click",(function(){return u.hc(n),u.Zb().checkout()})),u.lc(1," Hacer Pedido "),u.Ob()}}var O,v,k,y=((O=function(){function t(e,n){_classCallCheck(this,t),this.cart=e,this.modalController=n,this.cartItems=[],this.totalPrice=0,this.totalProducts=0}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"ionViewWillEnter",value:function(){this.cartItems=this.cart.getCart(),this.totalPrice=this.cart.getTotalPrice(),this.totalProducts=this.cart.getCountCart(),console.log(this.cartItems)}},{key:"addItem",value:function(t){t.totalPrice+=t.unitPrice,t.amount++,this.totalPrice+=t.unitPrice,this.totalProducts++,this.cart.saveCart(this.cartItems)}},{key:"removeItem",value:function(t){t.amount>1&&(t.amount--,t.totalPrice-=t.unitPrice,this.totalProducts--,this.totalPrice-=t.unitPrice),this.cart.saveCart(this.cartItems),console.log(t)}},{key:"deleteFromCart",value:function(t,e){this.totalPrice-=t.totalPrice,this.cartItems=this.cartItems.filter((function(e){return e.id!==t.id})),this.cart.saveCart(this.cartItems),this.totalProducts=this.cart.getCountCart(),e.el.remove()}},{key:"getTotalPriceCart",value:function(){return this.cart.getTotalPrice()}},{key:"checkout",value:function(){this.cartItems.length>0&&(this.cart.saveCart(this.cartItems),this.goToCheckOut())}},{key:"goToCheckOut",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalController.create({component:m,swipeToClose:!0});case 2:return e=t.sent,t.next=5,e.present();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})))}}]),t}()).\u0275fac=function(t){return new(t||O)(u.Kb(d.a),u.Kb(s.W))},O.\u0275cmp=u.Eb({type:O,selectors:[["app-tab4"]],decls:6,vars:4,consts:[[1,"animate__animated","animate__fadeIn"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","ion-padding",4,"ngIf"],["expand","block","shape","round","color","primary",3,"click",4,"ngIf"],["ionItem",""],["side","start"],["slot","icon-only","color","light"],["name","heart","color","danger",2,"zoom","2.0"],["size","3"],[3,"src"],["size","auto",1,"ion-text-center"],["size","8"],["color","medium","outline","true"],["name","remove-outline","color","danger",3,"click"],["name","add-outline","color","success",3,"click"],["size","4"],["color","danger",2,"font-size","15pt","float","right","padding-top","3px"],["side","end"],["slot","icon-only","color","danger"],["name","trash-outline",2,"zoom","2.0",3,"click"],[1,"ion-padding"],[1,"ion-no-padding",2,"margin","0"],["color","success",2,"float","right","font-size","20pt"],["lines","none",1,"ion-no-padding","ion-text-center"],["expand","block","shape","round","color","primary",3,"click"]],template:function(t,e){1&t&&(u.Pb(0,"ion-content",0),u.kc(1,p,3,0,"ion-text",1),u.Pb(2,"ion-list"),u.kc(3,f,27,4,"ion-item-divider",2),u.Ob(),u.kc(4,P,8,2,"ion-card",3),u.kc(5,g,2,0,"ion-button",4),u.Ob()),2&t&&(u.zb(1),u.ec("ngIf",0===e.cartItems.length),u.zb(2),u.ec("ngForOf",e.cartItems),u.zb(1),u.ec("ngIf",e.cartItems.length>0),u.zb(1),u.ec("ngIf",e.cartItems.length>0))},directives:[s.n,r.j,s.D,r.i,s.R,s.y,s.B,s.A,s.z,s.u,s.x,s.s,s.K,s.m,s.v,s.l,s.C,s.g,s.i,s.h,s.e],styles:[""]}),O),C=[{path:"",component:y}],I=((v=function t(){_classCallCheck(this,t)}).\u0275mod=u.Ib({type:v}),v.\u0275inj=u.Hb({factory:function(t){return new(t||v)},imports:[[a.i.forChild(C)],a.i]}),v),w=n("j1ZV"),x=((k=function t(){_classCallCheck(this,t)}).\u0275mod=u.Ib({type:k}),k.\u0275inj=u.Hb({factory:function(t){return new(t||k)},imports:[[r.b,c.a,s.U,a.i.forChild([{path:"",component:y}]),I,w.a]]}),k)}}]);